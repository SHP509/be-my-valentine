<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Be My Valentine ğŸ’˜</title>

<style>
  * { box-sizing: border-box; font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif; }
  body { margin: 0; height: 100vh; background: linear-gradient(135deg, #ffdde1, #ee9ca7); overflow: hidden; }

  .screen { display: none; height: 100vh; width: 100vw; align-items: center; justify-content: center; flex-direction: column; text-align: center; }
  .active { display: flex; }

  h1 { color: #b3005e; margin: 10px; }
  p { color: #6b0038; margin: 10px; }

  button {
    padding: 12px 28px;
    font-size: 18px;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    tap-highlight-color: transparent;
  }
  .start-btn { background: #ff4d88; color: white; }

  /* ===== GAME AREA ===== */
  #gameArea { position: relative; width: 100vw; height: 100vh; overflow: hidden; }
  #cupid { position: absolute; bottom: 20px; left: 20px; font-size: 64px; }

  .heart-arrow {
    position: absolute;
    font-size: 84px;   /* desktop size */
    width: 110px;      /* clickable hitbox */
    height: 110px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    user-select: none;
  }

  /* QUESTION SCREEN */
  .yes-btn { background: #ff4d88; color: white; margin-right: 20px; }
  .no-btn { position: absolute; background: white; color: #ff4d88; border: 2px solid #ff4d88; }

  /* FINAL SCREEN */
  .celebrate { font-size: 60px; animation: pulse 1s infinite alternate; }

  @keyframes pulse { from { transform: scale(1); } to { transform: scale(1.1); } }

  /* ===== MOBILE OPTIMIZATION ===== */
  @media (max-width: 768px) {
    #cupid { font-size: 42px; }
    .heart-arrow { font-size: 48px; width: 72px; height: 72px; }
    button { font-size: 16px; padding: 10px 20px; }
  }
</style>
</head>

<body>

<!-- SCREEN 1 -->
<div id="screen1" class="screen active">
  <h1>Hey you ğŸ’—</h1>
  <p>Before I ask you something importantâ€¦ help Cupid?</p>
  <button class="start-btn" onclick="startGame()">Start</button>
</div>

<!-- SCREEN 2 -->
<div id="screen2" class="screen">
  <h1>Catch 10 Heart Arrows ğŸ’˜</h1>
  <p>Click the hearts Cupid shoots!</p>
  <p><strong>Hearts:</strong> <span id="score">0</span>/10</p>
  <div id="gameArea">
    <div id="cupid">ğŸ‘¼ğŸ¹</div>
  </div>
</div>

<!-- SCREEN 3 -->
<div id="screen3" class="screen">
  <h1>Will you be my Valentine? ğŸ’–</h1>
  <div style="margin-top: 30px;">
    <button class="yes-btn" onclick="yesClicked()">Yes ğŸ’˜</button>
    <button class="no-btn" id="noBtn">No ğŸ™ƒ</button>
  </div>
</div>

<!-- SCREEN 4 -->
<div id="screen4" class="screen">
  <div class="celebrate">ğŸ’–ğŸ’–ğŸ’–</div>
  <h1>YAY!!</h1>
  <p>I'm really glad you said yes ğŸ¥°<br/>Happy Valentineâ€™s Day, Jaan ğŸ’Œ</p>
</div>

<script>
const screens = document.querySelectorAll(".screen");
const gameArea = document.getElementById("gameArea");
const scoreEl = document.getElementById("score");
const cupid = document.getElementById("cupid");

let arrows = [];
let score = 0;
let running = false;

// Show screen helper
function showScreen(id) {
  screens.forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

// Start game
function startGame() {
  showScreen("screen2");
  running = true;
  shootLoop();
  requestAnimationFrame(update);
}

// Shoot hearts
function shootLoop() {
  if (!running) return;

  const heart = document.createElement("div");
  heart.className = "heart-arrow";
  heart.innerText = "ğŸ’–";

  const isMobile = window.innerWidth < 768;
  const startX = isMobile ? 40 : 80;
  const startY = isMobile ? window.innerHeight - 120 : window.innerHeight - 160;

  heart.style.left = startX + "px";
  heart.style.top = startY + "px";

  gameArea.appendChild(heart);

  const velocityX = Math.random() * 1.5 + 1.5;
  const velocityY = Math.random() * 1.5 + 1.5;

  const arrow = { el: heart, x: startX, y: startY, vx: velocityX, vy: velocityY };
  arrows.push(arrow);

  heart.onclick = () => {
    score++;
    scoreEl.innerText = score;
    heart.remove();
    arrows = arrows.filter(a => a !== arrow);

    if (score >= 10) {
      running = false;
      arrows.forEach(a => a.el.remove());
      setTimeout(() => showScreen("screen3"), 600);
    }
  };

  setTimeout(shootLoop, 900);
}

// Animate arrows
function update() {
  arrows.forEach(a => {
    a.x += a.vx;
    a.y -= a.vy;
    a.el.style.left = a.x + "px";
    a.el.style.top = a.y + "px";
    if (a.x > window.innerWidth || a.y < -50) {
      a.el.remove();
      arrows = arrows.filter(x => x !== a);
    }
  });

  if (running) requestAnimationFrame(update);
}

// NO BUTTON (desktop + mobile)
const noBtn = document.getElementById("noBtn");
let noCount = 0;

function moveNo(e) {
  if (e) e.preventDefault(); // stops tap delay
  noCount++;

  noBtn.style.left = Math.random() * (window.innerWidth - 120) + "px";
  noBtn.style.top = Math.random() * (window.innerHeight - 160) + "px";

  if (noCount >= 7) {
    noBtn.innerText = "ğŸ¥ºPlease?"; // sad eyes emoji
  }
}

// Desktop
noBtn.addEventListener("mouseenter", moveNo);
noBtn.addEventListener("click", moveNo);
// Mobile
noBtn.addEventListener("touchstart", moveNo);

function yesClicked() {
  showScreen("screen4");
}

// Keep Cupid in place on resize
window.addEventListener("resize", () => {
  cupid.style.left = window.innerWidth < 768 ? "20px" : "20px";
});
</script>

</body>
</html>
